<ng-container *ngIf="careTeams?.length > 0">
  <mat-accordion multi>
    <mat-expansion-panel *ngFor="let careTeam of careTeams">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ careTeam.name || 'Unnamed Care Team' }}
        </mat-panel-title>
        <mat-panel-description>
          Status: {{ careTeam.status || 'N/A' }}
        </mat-panel-description>
      </mat-expansion-panel-header>

      <mat-card class="mat-elevation-z4" style="margin: 1rem 0;">
        <mat-card-content>

          <mat-list dense>
            <mat-list-item>
              <strong>Status:</strong>&nbsp;{{ careTeam.status || 'N/A' }}
            </mat-list-item>

            <mat-list-item>
              <strong>Subject:</strong>&nbsp;{{ careTeam.subject || 'N/A' }}
            </mat-list-item>

            <mat-list-item>
              <strong>Description:</strong>&nbsp;{{ careTeam.description || 'N/A' }}
            </mat-list-item>

            <mat-list-item>
              <strong>Category:</strong>&nbsp;{{ careTeam.category?.[0]?.text || 'N/A' }}
            </mat-list-item>

            <mat-list-item>
              <strong>Participants Summary:</strong>&nbsp;{{ careTeam.participantsSummary || 'N/A' }}
            </mat-list-item>
          </mat-list>

          <h4>Participants</h4>
          <mat-list dense>
            <mat-list-item *ngFor="let participant of careTeam.participants">
              <div>
                <p><strong>Reference:</strong> {{ participant.reference }}</p>
                <p *ngIf="participant.display"><strong>Display:</strong> {{ participant.display }}</p>
              </div>
            </mat-list-item>
          </mat-list>

        </mat-card-content>
      </mat-card>
    </mat-expansion-panel>
  </mat-accordion>
</ng-container>

<ng-container *ngIf="careTeams?.length === 0">
  <mat-card>
    <mat-card-content>No care team data found.</mat-card-content>
  </mat-card>
</ng-container>
